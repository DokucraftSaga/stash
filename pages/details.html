<h2>File details</h2><div class="block"><div class="texture-preview no-action x1"></div><div class="info"><p>Made by <a class="contributor-name"></a> (<a class="profile-link">Profile</a>)</p><p class="append-file-path">ID: <a class="file-id"></a></p><p>Category: <a class="file-category"></a></p><p class="png-only">Size: <span class="image-size"></span></p><p class="zip-only">Type: <span class="zip-type"></span></p><p>Date: <span class="file-date"></span></p></div></div><div class="misc-stats"></div><br/><div class="package-info"></div><link rel="stylesheet" href="/stash/pages/css/details.css"/><script>stash.page.hasWork=!0,stash.page.identifier().then(t=>{const a=getURLParams(t.attr("data-params")).details.split(":"),e=a[0],n=a[1],i=stash.files.all.filter(idFilter([{min:parseInt(e),max:parseInt(e)}]))[0],o=getTimestamp(i),s=getContributor(i),r=getCategory(i);if(t.find(".contributor-name").text(s).attr("title",`Files by ${s}`).attr("href",toSearchURLParams({contributor:s})).on("click",a=>{stash.page.modal(toSearchURLParams({contributor:s}),t.closest(".stash-page-wrapper")),a.preventDefault()}),t.find(".profile-link").attr("href",toURLParams({profile:s})).on("click",a=>{stash.page.modal(toURLParams({profile:s}),t.closest(".stash-page-wrapper")),a.preventDefault()}),t.find(".file-id").text(e),t.find(".file-category").text(r).attr("title",`Files in ${r}`).attr("href",toSearchURLParams({category:r})).on("click",a=>{stash.page.modal(toSearchURLParams({category:r}),t.closest(".stash-page-wrapper")),a.preventDefault()}),t.find(".file-date").text(formatDate(o)),n)stash.getZIPContent(i).then(a=>{const i=a.filter(t=>n==(t.path.length>0?t.path+"/":"")+t.name);if(0==i.length)return stash.workError(),void stash.notify("Failed to find file: "+n,null,"error");const o=i[0],s=getExt(o.name);t.find(".file-id").attr("title",`ZIP file containing ${o.name}`).attr("href",toURLParams({details:e})).on("click",t=>{stash.page.load(toURLParams({details:e})),t.preventDefault()}),t.find(".append-file-path").append(":"+(o.path.length>0?o.path+"/":"")+"<span>"+o.name.replace(/\.[^.]*$/,"")+"</span>."+s);const r=t.find(".texture-preview").addClass("file ext "+s).removeClass("x1").attr("data-filetype",s),d=E("div").addClass("overlay").appendTo(r);if("png"==s){r.append(E("div").addClass("img b-lazy").attr("data-src","data:image/png;base64,"+o.content)),stash.getImage("data:image/png;base64,"+o.content).then(a=>{t.find(".image-size").text(a.width+"x"+a.height)}),t.find(".png-only").show(),t.find(".zip-only").hide(),d.append(E("a").addClass("action-button download-image-button").attr("download",o.name).attr("title","Download").attr("href","data:image/png;base64,"+o.content).on("click",t=>{t.stopPropagation()})),d.append(E("div").addClass("action-button fullscreen-button").attr("title","Fullscreen").on("click",t=>{stash.fullscreenImage("data:image/png;base64,"+o.content),t.stopPropagation()}));const a=new Image;a.onload=(()=>{a.width<128&&a.height<128&&r.addClass("pixelated")}),a.src="data:image/png;base64,"+o.content}else t.find(".png-only,.zip-only").hide(),d.append(E("a").addClass("action-button download-image-button").attr("download",o.name).attr("title","Download").attr("href","data:text/plain;base64,"+btoa(o.content)).on("click",t=>{t.stopPropagation()}));tippy(d.find(".action-button").toArray(),{arrow:!0,animation:"perspective",performance:!0}),tippy(t.find(".info a").toArray(),{placement:"right",arrow:!0,animation:"perspective"}),stash.workComplete()}).catch(t=>{stash.workError()});else{if(createFilePreview(i,t.find(".texture-preview")),i.match(/\.zip$/)){t.find(".zip-type").text(stash.typeNames[stash.data[i].Z]),t.find(".zip-only").show(),t.find(".png-only").hide();const a=()=>{$.getJSON(contentData+i.replace(/\.zip$/,".json"),a=>{const e=(t,a)=>{if("object"==typeof t){let n=E("div").addClass("info-dir");a?n.append(a):n.addClass("no-name");for(let a in t)t.hasOwnProperty(a)&&n.append(e(t[a],a));return n}return E("div").addClass("info-file").text(a).append(E("span").addClass("info-filesize").text(formatBytes(t)))};t.find(".zip-content-display").remove(),t.find(".package-info").append(e(a).addClass("zip-content-display")),stash.workComplete()})};t.find(".package-info").append(E("h2").text("File content"),E("select").addClass("zip-content-display-type").append(E("option").attr("value","tree").text("Tree view").prop("selected",!0),E("option").attr("value","list").text("List view"),E("option").attr("value","tile").text("Tile view")).on("change",n=>{const o=t.find(".zip-content-display-type").val();stash.workIndeterminate(),"tree"==o?a():"list"==o?$.getJSON(contentData+i.replace(/\.zip$/,".json"),a=>{const e=(t,a,n)=>{for(let i in a)a.hasOwnProperty(i)&&("object"==typeof a[i]?e(t,a[i],n+i+"/"):t.append(E("div").addClass("info-file").text(n+i).append(E("span").addClass("info-filesize").text(formatBytes(a[i])))))},n=E("div").addClass("info-dir no-name zip-content-display");e(n,a,""),t.find(".zip-content-display").remove(),t.find(".package-info").append(n),stash.workComplete()}):"tile"==o&&stash.getZIPContent(i).then(a=>{t.find(".zip-content-display").remove();const n=E("div").addClass("zip-content-display tile-view");a.forEach(a=>{const i=getExt(a.name),o=E("div").addClass("file ext "+i).attr("data-filetype",i).attr("title",`<h3>${a.name}</h3><p>Size: ${formatBytes(a.size)}</p>${a.path.length>0?`<br><i>${a.path}</i>`:""}`).on("click",()=>{stash.page.modal(toURLParams({details:e+":"+(a.path.length>0?a.path+"/":"")+a.name}),t.closest(".stash-page-wrapper"))}),s=E("div").addClass("overlay").appendTo(o);tippy(o[0],{arrow:!0,animation:"perspective",placement:"right"}),"png"==i?(o.append(E("div").addClass("img b-lazy").attr("data-src","data:image/png;base64,"+a.content)),s.append(E("a").addClass("action-button download-image-button").attr("download",a.name).attr("title","Download").attr("href","data:image/png;base64,"+a.content).on("click",t=>{t.stopPropagation()})),s.append(E("div").addClass("action-button fullscreen-button").attr("title","Fullscreen").on("click",t=>{stash.fullscreenImage("data:image/png;base64,"+a.content),t.stopPropagation()})),stash.getImage("data:image/png;base64,"+a.content).then(t=>{t.width<128&&t.height<128&&o.addClass("pixelated")})):s.append(E("a").addClass("action-button download-image-button").attr("download",a.name).attr("title","Download").attr("href","data:text/plain;base64,"+btoa(a.content)).on("click",t=>{t.stopPropagation()})),tippy(s.find(".action-button").toArray(),{arrow:!0,animation:"perspective",performance:!0}),n.append(o)}),t.find(".package-info").append(n),stash.workComplete()}).catch(t=>{stash.workError()})})),initSelectric(),a()}else t.find(".image-size").text(stash.data[i].S.join("x")),t.find(".png-only").show(),t.find(".zip-only").hide(),stash.data[i].M?$.ajax(stashURL+i+".mcmeta").done(a=>{t.find(".package-info").append(E("h2").text("MCMETA"),E("textarea").attr("spellcheck",!1).prop("readonly",!0).val(JSON.stringify(JSON.parse(a),null,2))),stash.workComplete()}).fail(t=>{stash.workError(),stash.notify(`Failed to load MCMETA. (${t.status} ${t.statusText})`,null,"error")}):stash.workComplete();tippy(t.find(".info a").toArray(),{placement:"right",arrow:!0,animation:"perspective"});const a=stash.files.all.filter(contributorFilter([s])).sort(idSort),n=a.indexOf(i)+1,d=a.filter(categoryFilter(r)).indexOf(i)+1,p=stash.files.all.sort(idSort),l=p.indexOf(i)+1,c=p.filter(categoryFilter(r)).indexOf(i)+1,f=Math.floor((o-opTime)/86400);t.find(".misc-stats").append(E("p").text(`This is the ${formatNum(n,!0)} file ${s} posted and the ${formatNum(d,!0)} file by them in ${r}.`),E("p").text(`It is the ${formatNum(l,!0)} file added to DokuStash and the ${formatNum(c,!0)} file added to ${r}.`),E("p").text(`It was posted ${formatNum(f)} days after the continuation project started.`))}});</script><img onload="stash.page.identifierLoaded(this);void(0);" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="/>