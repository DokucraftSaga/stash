<h2>File details</h2><div class="block"><div class="file-preview no-action"></div><div class="info"><p>Made by <a class="contributor-name"></a> (<a class="profile-link">Profile</a>)</p><p class="append-file-path">ID: <a class="file-id"></a></p><p class="png-only">Size: <span class="image-size"></span></p><p class="zip-only">Type: <span class="zip-type"></span></p><p>Date: <a class="file-date" title="Find files posted around the same time"></a></p><div class="tags"></div></div></div><div class="misc-stats"></div><br/><div class="package-info"></div><link rel="stylesheet" href="/stash/pages/css/details.css"/><script>stash.page.hasWork=!0,stash.page.identifier().then(t=>{const a=getURLParams(t.attr("data-params")).details.split(":"),e=a[0],n=a[1],s=stash.nameOf(e);if(!s)return t.children(":not(script):not(link)").remove(),t.append(E("p").text("File not found.")),void stash.workComplete();const i=stash.data[s].contributor,o=stash.query.contributor(i);t.find(".contributor-name").text(i).attr("title",`Files by ${i}`).attr("href",toURLParams({search:o})).on("click",a=>{stash.page.modal(toURLParams({search:o}),t.closest(".stash-page-wrapper")),a.preventDefault()}),t.find(".profile-link").attr("href",toURLParams({profile:i})).on("click",a=>{stash.page.modal(toURLParams({profile:i}),t.closest(".stash-page-wrapper")),a.preventDefault()}),t.find(".file-id").text(e);const d=formatDate(new Date(stash.data[s].timestamp-604800)),p=formatDate(new Date(stash.data[s].timestamp+604800));if(t.find(".file-date").text(formatDate(stash.data[s].timestamp)).attr("href",toURLParams({search:`>{${d}} <{${p}}`})).on("click",a=>{stash.page.modal(toURLParams({search:`>{${d}} <{${p}}`}),t.closest(".stash-page-wrapper")),a.preventDefault()}),n)stash.getZIPContent(s).then(a=>{const s=a.filter(t=>n==(t.path.length>0?t.path+"/":"")+t.name);if(0==s.length)return stash.workError(),void stash.notify("Failed to find file: "+n,null,"error");const i=s[0],o=getExt(i.name);t.find(".file-id").attr("title",`ZIP file containing ${i.name}`).attr("href",toURLParams({details:e})).on("click",t=>{stash.page.load(toURLParams({details:e})),t.preventDefault()}),t.find(".append-file-path").append(":"+(i.path.length>0?i.path+"/":"")+"<span>"+i.name.replace(/\.[^.]*$/,"")+"</span>."+o);const d=t.find(".file-preview").addClass("file ext "+o).attr("data-filetype",o),p=E("div").addClass("overlay").appendTo(d);if("png"==o){d.append(E("div").addClass("img b-lazy").attr("data-src","data:image/png;base64,"+i.content)),stash.getImage("data:image/png;base64,"+i.content).then(a=>{t.find(".image-size").text(a.width+"x"+a.height)}),t.find(".png-only").show(),t.find(".zip-only").hide(),p.append(E("a").addClass("action-button download-image-button").attr("download",i.name).attr("title","Download").attr("href","data:image/png;base64,"+i.content).on("click",t=>{t.stopPropagation()})),p.append(E("div").addClass("action-button fullscreen-button").attr("title","Fullscreen").on("click",t=>{stash.fullscreenImage("data:image/png;base64,"+i.content),t.stopPropagation()}));const a=new Image;a.onload=(()=>{a.width<128&&a.height<128&&d.addClass("pixelated")}),a.src="data:image/png;base64,"+i.content}else t.find(".png-only,.zip-only").hide(),p.append(E("a").addClass("action-button download-image-button").attr("download",i.name).attr("title","Download").attr("href","data:text/plain;base64,"+btoa(i.content)).on("click",t=>{t.stopPropagation()}));tippy(p.find(".action-button").toArray()),tippy(t.find(".info a").toArray(),{placement:"right"}),stash.workComplete()}).catch(t=>{stash.workError(),stash.notify("Failed to load ZIP file: "+t,null,"error")});else{if(t.find(".tags").replaceWith(stash.tags.element(s)),createFilePreview(s,t.find(".file-preview")),s.match(/\.zip$/)){t.find(".zip-type").text(stash.typeNames[stash.data[s].packageType]),t.find(".zip-only").show(),t.find(".png-only").hide();const a=()=>{stash.getZIPContent(s).then(a=>{t.find(".zip-content-display").remove();const n=E("div").addClass("zip-content-display tile-view");a.forEach(a=>{const s=getExt(a.name),i=E("div").addClass("file ext "+s).attr("data-filetype",s).attr("title",`<h3>${a.name}</h3><p>Size: ${formatBytes(a.size)}</p>${a.path.length>0?`<br><p><sub class="faded">${a.path}</sub></p>`:""}`).on("click",()=>{stash.page.modal(toURLParams({details:e+":"+(a.path.length>0?a.path+"/":"")+a.name}),t.closest(".stash-page-wrapper"))}),o=E("div").addClass("overlay").appendTo(i);tippy(i[0],{placement:"right"}),"png"==s?(i.append(E("div").addClass("img b-lazy").attr("data-src","data:image/png;base64,"+a.content)),o.append(E("a").addClass("action-button download-image-button").attr("download",a.name).attr("title","Download").attr("href","data:image/png;base64,"+a.content).on("click",t=>{t.stopPropagation()})),o.append(E("div").addClass("action-button fullscreen-button").attr("title","Fullscreen").on("click",t=>{stash.fullscreenImage("data:image/png;base64,"+a.content),t.stopPropagation()})),stash.getImage("data:image/png;base64,"+a.content).then(t=>{t.width<128&&t.height<128&&i.addClass("pixelated")})):o.append(E("a").addClass("action-button download-image-button").attr("download",a.name).attr("title","Download").attr("href",URL.createObjectURL(new Blob([a.content],{type:"text/plain"}))).on("click",t=>{t.stopPropagation()})),tippy(o.find(".action-button").toArray()),n.append(i)}),t.find(".package-info").append(n),stash.workComplete()}).catch(t=>{console.error(t),stash.workError()})};t.find(".package-info").append(E("div").addClass("row").append(E("h2").text("File content"),E("div").addClass("zip-content-display-type").css({width:"260px","margin-left":"12px"}).on("change",n=>{const i=t.find(".zip-content-display-type")[0].val();stash.workIndeterminate(),"tree"==i?stash.getZIPContent(s).then(a=>{t.find(".zip-content-display").remove();const n=E("div").addClass("zip-content-display info-dir no-name"),s={};a.forEach(t=>{let a=s;t.path.split("/").forEach(t=>{a[t]=a[t]||{},a=a[t]}),a[t.name]=t});const i=(a,n)=>{Object.keys(n).forEach(s=>{"number"==typeof n[s].size?a.append(E("div").addClass("info-file").text(n[s].name).append(E("span").addClass("info-filesize").text(formatBytes(n[s].size))).on("click",()=>{stash.page.modal(toURLParams({details:e+":"+(n[s].path.length>0?n[s].path+"/":"")+n[s].name}),t.closest(".stash-page-wrapper"))})):i(E("div").addClass("info-dir").text(s).appendTo(a),n[s])})};i(n,s),t.find(".package-info").append(n),stash.workComplete()}):"list"==i?stash.getZIPContent(s).then(a=>{t.find(".zip-content-display").remove();const n=E("div").addClass("zip-content-display info-dir no-name");a.forEach(a=>{n.append(E("div").addClass("info-file").text((a.path.length>0?a.path+"/":"")+a.name).append(E("span").addClass("info-filesize").text(formatBytes(a.size))).on("click",()=>{stash.page.modal(toURLParams({details:e+":"+(a.path.length>0?a.path+"/":"")+a.name}),t.closest(".stash-page-wrapper"))}))}),t.find(".package-info").append(n),stash.workComplete()}):"tile"==i&&a()}))),CCInput(t.find(".zip-content-display-type"),{type:"select",lists:[{name:"Display Options",list:[{name:"Tile view",value:"tile",selected:!0},{name:"Tree view",value:"tree"},{name:"List view",value:"list"}]}]}),a()}else t.find(".image-size").text(stash.data[s].size.join("x")),t.find(".png-only").show(),t.find(".zip-only").hide(),stash.data[s].mcmeta?$.ajax(stash.url.files+s+".mcmeta").done(a=>{t.find(".package-info").append(E("h2").text("MCMETA"),E("textarea").attr("spellcheck",!1).prop("readonly",!0).val(JSON.stringify(JSON.parse(a),null,2))),stash.workComplete()}).fail(t=>{stash.workError(),stash.notify(`Failed to load MCMETA. (${t.status} ${t.statusText})`,null,"error")}):stash.workComplete();tippy(t.find(".info a").toArray(),{placement:"right"});const a=stash.search(stash.query.contributor(i)).sort(idSort).indexOf(s)+1,n=stash.files.sort(idSort).indexOf(s)+1,o=Math.floor((stash.data[s].timestamp-opTime)/86400);t.find(".misc-stats").append(E("p").text(`This is the ${formatNum(a,!0)} file by ${i} and the ${formatNum(n,!0)} file added to DokuStash.`),E("p").text(`It was posted ${formatNum(o)} days after the continuation project started.`))}});</script><img onload="stash.page.identifierLoaded(this);void(0);" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="/>