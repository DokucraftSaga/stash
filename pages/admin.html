<div class="sp-admin-wrapper"><div class="sidebar"><h2>Control Panel</h2><h3>Features</h3><div class="sidebar-button" data-tab="status">Status Page Manager</div><div class="sidebar-button" data-tab="implicit-tags">Implicit Tags Editor</div><div class="sidebar-button" data-tab="shortcuts">Shortcut Editor</div></div><div class="sp-admin-editor filler"><div class="blank-page"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><circle cx="256" cy="256" r="48" class="st0"/><path d="M96 160l-48 48v96l48 48zM416 160v192l48-48v-96zM304 48h-96l-48 48h192z" class="st0"/><g><path d="M416 400v-48c0-5.6-.9-10.9-2.3-16-7.1-27.6-31.9-48-61.7-48-35.3 0-64 28.7-64 64 0 29.8 20.4 54.6 48 61.7 5.1 1.3 10.4 2.3 16 2.3h48c0 8.8 7.2 16 16 16s16-7.2 16-16-7.2-16-16-16zm-32-16h-64v-8c0-30.9 25.1-56 56-56h8v64zM80 416c0 8.8 7.2 16 16 16s16-7.2 16-16h48c5.6 0 10.9-.9 16-2.3 27.6-7.1 48-31.9 48-61.7 0-35.3-28.7-64-64-64-29.8 0-54.6 20.4-61.7 48-1.3 5.1-2.3 10.4-2.3 16v48c-8.8 0-16 7.2-16 16zm48-96h8c30.9 0 56 25.1 56 56v8h-64v-64zM96 112v48c0 5.6.9 10.9 2.3 16 7.1 27.6 31.9 48 61.7 48 35.3 0 64-28.7 64-64 0-29.8-20.4-54.6-48-61.7-5.1-1.3-10.4-2.3-16-2.3h-48c0-8.8-7.2-16-16-16s-16 7.2-16 16 7.2 16 16 16zm32 16h64v8c0 30.9-25.1 56-56 56h-8v-64zM432 96c0-8.8-7.2-16-16-16s-16 7.2-16 16h-48c-5.6 0-10.9.9-16 2.3-27.6 7.1-48 31.9-48 61.7 0 35.3 28.7 64 64 64 29.8 0 54.6-20.4 61.7-48 1.3-5.1 2.3-10.4 2.3-16v-48c8.8 0 16-7.2 16-16zm-48 96h-8c-30.9 0-56-25.1-56-56v-8h64v64z" class="st0"/></g><g><path d="M208 464h96l48-48H160z" class="st0"/></g></svg></div></div></div><link rel="stylesheet" href="/stash/pages/css/admin.css"/><script>stash.page.identifier().then(stash.page.requireLogin("admin")).then(t=>{const s=/(^|[!@\(\) |])([A-z0-9_-]+|"[A-z0-9_ -]+"?)$/,e={status:()=>stash.firebase.db.collection("stash").doc("status").get().then(s=>{CCInput(t.find(".sp-admin-status-default-list"),{placeholder:"File list name",initialValue:s.get("default"),lists:[{name:"File Lists",list:()=>t.find(".sp-admin-status-file-lists .list-name").toArray().map(t=>t.val())}]});const e=(s="",e="")=>{t.find(".sp-admin-status-file-lists").append(E("div").addClass("row file-list").append(CCInput(E("div").addClass("list-name"),{placeholder:"Name",initialValue:s}),CCInput(E("div").addClass("list-id filler"),{placeholder:"List ID",initialValue:e}),E("div").addClass("inline button").text("View").on("click",t=>{window.open(`https://docs.google.com/spreadsheets/u/0/d/${$(t.currentTarget).siblings(".list-id")[0].val()}/view`),t.preventDefault()}),E("div").addClass("inline button warning").text("X").on("click",t=>$(t.currentTarget).parent().remove())))},a=s.get("lists");Object.keys(a).forEach(t=>e(t,a[t])),t.find(".sp-admin-status-add-file-list-button").on("click",t=>e());let i=-1/0;t.find(".sp-admin-status-save-button").on("click",s=>{if(Date.now()-i>1e4){const s=stash.blockInput(null,!1),e=stash.notify("Working...","working"),a={default:t.find(".sp-admin-status-default-list")[0].val(),lists:{}};t.find(".sp-admin-status-file-lists .file-list").each((t,s)=>a.lists[$(s).children(".list-name")[0].val()]=$(s).children(".list-id")[0].val()),stash.firebase.db.collection("stash").doc("status").set(a).then(()=>{i=Date.now(),stash.removeInputBlocker(s),stash.dismissNotification(e),stash.notify("Changes saved.")}).catch(t=>{stash.removeInputBlocker(s),stash.dismissNotification(e),stash.notify("Failed to save changes.",null,"error"),console.error(t)})}else stash.notify("Please wait a few seconds before saving again.",null,"error")})}),"implicit-tags":()=>new Promise((e,a)=>{$.getJSON(stash.url.data+"implicit-tags.json").done(a=>{const i=(t="",e="")=>E("div").addClass("row").append(CCInput(E("div").addClass("tag-name"),{placeholder:"Name",initialValue:t}),CCInput(E("div").addClass("tag-definition filler"),{placeholder:"Definition",initialValue:e,lists:[{name:"Tags",list:()=>stash.tags.names.all},{name:"Contributors",list:stash.contributors}],value:t=>{const e=t.match(s);return e?e[2]:""},replace:(t,e,a)=>t.replace(s,(s,i,n,l)=>("@"!==i&&"Contributors"===a&&"@"!==t.substring(l-1,l)?(i.length?i:"")+"@":i)+(~e.indexOf(" ")?'"'+e+'"':e)),enter:(t,s)=>{t.length&&(stash.page.load(toURLParams({search:t})),$(s.currentTarget).blur())}}),E("div").addClass("inline button").text("Test").on("click",t=>{const s=stash.search($(t.currentTarget).siblings(".tag-definition")[0].val()).length;stash.notify(`This query matches ${s} file${1==s?"":"s"}.`),t.preventDefault()}),E("div").addClass("inline button warning").text("X").on("click",t=>$(t.currentTarget).parent().remove()));t.find(".sp-admin-it-list").append(Object.keys(a).map(t=>i(t,a[t]))),t.find(".sp-admin-it-add-tag-button").on("click",s=>t.find(".sp-admin-it-list").append(i()));let n=-1/0;t.find(".sp-admin-it-save-button").on("click",s=>{if(Date.now()-n>1e4){const s=stash.blockInput(null,!1),e=stash.notify("Working...","working"),a={};t.find(".sp-admin-it-list .row").each((t,s)=>a[$(s).children(".tag-name")[0].val()]=$(s).children(".tag-definition")[0].val()),stash.firebase.post("/tags/implicit",a).then(()=>{n=Date.now(),stash.removeInputBlocker(s),stash.dismissNotification(e),stash.notify("Changes saved. Refresh the page in a minute to get the update on your end.")}).catch(t=>{stash.removeInputBlocker(s),stash.dismissNotification(e),stash.notify("Failed to save changes.",null,"error"),console.error(t)})}else stash.notify("Please wait a few seconds before saving again.",null,"error")}),e()}).fail(t=>a(t))}),shortcuts:()=>new Promise((e,a)=>{$.getJSON(stash.url.data+"shortcuts.json").done(a=>{t.find(".sp-admin-sc-list").append(Object.keys(a).map(t=>((t="",e="")=>E("div").addClass("row").append(CCInput(E("div").addClass("shortcut-name"),{readonly:!0,initialValue:t}),CCInput(E("div").addClass("shortcut-definition filler"),{placeholder:"Definition",initialValue:e,lists:[{name:"Tags",list:()=>stash.tags.names.all},{name:"Contributors",list:stash.contributors}],value:t=>{const e=t.match(s);return e?e[2]:""},replace:(t,e,a)=>t.replace(s,(s,i,n,l)=>("@"!==i&&"Contributors"===a&&"@"!==t.substring(l-1,l)?(i.length?i:"")+"@":i)+(~e.indexOf(" ")?'"'+e+'"':e)),enter:(t,s)=>{t.length&&(stash.page.load(toURLParams({search:t})),$(s.currentTarget).blur())}}),E("div").addClass("inline button").text("Test").on("click",t=>{const s=stash.search($(t.currentTarget).siblings(".shortcut-definition")[0].val()).length;stash.notify(`This query matches ${s} file${1==s?"":"s"}.`),t.preventDefault()})))(t,a[t])));let i=-1/0;t.find(".sp-admin-sc-save-button").on("click",s=>{if(Date.now()-i>1e4){const s=stash.blockInput(null,!1),e=stash.notify("Working...","working"),a={};t.find(".sp-admin-sc-list .row").each((t,s)=>a[$(s).children(".shortcut-name")[0].val()]=$(s).children(".shortcut-definition")[0].val()),stash.firebase.post("/shortcuts",a).then(()=>{i=Date.now(),stash.removeInputBlocker(s),stash.dismissNotification(e),stash.notify("Changes saved. Refresh the page in a minute to get the update on your end.")}).catch(t=>{stash.removeInputBlocker(s),stash.dismissNotification(e),stash.notify("Failed to save changes.",null,"error"),console.error(t)})}else stash.notify("Please wait a few seconds before saving again.",null,"error")}),e()}).fail(t=>a(t))})};let a=!1;t.find(".sidebar-button").on("click",s=>{a||(s=>new Promise(e=>{a=!0,stash.workIndeterminate(),stash.page.closeModal(t.closest(".stash-page-wrapper").find(".modal")),t.find(".sp-admin-editor").empty().append(stash.loadingHint).load(`pages/admin/${s}.html`,e)}).then(()=>e[s]().catch(t=>{stash.notify("Something that really shouldn't go wrong went wrong... Whoops.",null,"error"),console.error(t)})).then(()=>{stash.workComplete(),a=!1}))($(s.currentTarget).attr("data-tab"))})}).catch(t=>{stash.notify(t||"Access denied.",null,"error"),stash.page.load("root")});</script><img onload="stash.page.identifierLoaded(this);void(0);" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="/>