(()=>{let e=null,t=()=>{null!=e&&e.getUser().getProfile().then(e=>{let t=e.data;$("#login-status").text("Logged in as "+(t.name||t.login))})};(()=>{if(null!=localStorage.getItem("gh-login-token"))return e=new GitHub({token:localStorage.getItem("gh-login-token")}),void t();let o=getURLParams();if(null!=o){if(o.hasOwnProperty("token"))return e=new GitHub({token:o.token}),localStorage.setItem("gh-login-token",o.token),void t();if(o.hasOwnProperty("code"))return void $.getJSON("https://dokustash-gatekeeper.herokuapp.com/authenticate/"+o.code,o=>{e=new GitHub({token:o.token}),localStorage.setItem("gh-login-token",o.token),t()})}goToPage("login")})()})();