<div class="sp-msdl-wrapper"><div class="sp-msdl-right-pane"><h2>Dokucraft Mod Support Packs</h2><p>Select packs you want to include on the right, then click the button below to download and merge them.</p><hr/><p>Before downloading, enter the resource pack format number below.</p><table><thead><tr><th>Minecraft Version</th><th>Resource Pack Format</th></tr></thead><tbody><tr><td>1.8 and under</td><td>1</td></tr><tr><td>1.9 and 1.10</td><td>2</td></tr><tr><td>1.11 and 1.12</td><td>3</td></tr><tr><td>1.13 and up</td><td>4</td></tr></tbody></table><div class="row"><div class="sp-msdl-pack-format inline"></div></div><hr/><div class="row"><div class="sp-msdl-download-button inline button">Download</div><div class="filler"></div><div class="sp-msdl-deselect-all-button inline button">Deselect all</div></div></div><div class="sp-msdl-left-pane filler"><div class="sp-msdl-searchbar"></div><div class="sp-msdl-files"></div></div></div><link rel="stylesheet" href="/stash/pages/css/mod-support-downloader.css"/><script>stash.page.hasWork=!0,stash.page.identifier().then(e=>{const a=getURLParams(e.attr("data-params"));let s=null;a["mod-support-downloader"]&&(s=new RegExp(a["mod-support-downloader"])),$.ajax("https://dokucraft.co.uk/data.json").done(t=>{const o=e.find(".sp-msdl-files"),l={Light:"sp-msdl-dokucraft-light",Dark:"sp-msdl-dokucraft-dark",High:"sp-msdl-dokucraft-high",None:"sp-msdl-no-flavor"};Object.values(t.packs).filter(e=>"Mod Support"==e.category).forEach(e=>{e.downloads.forEach(a=>{let t=(a.tags||["None"])[0];~t.indexOf("=")&&(t=t.split("=")[1]);const n=!!(a.tags||[]).find(e=>e.match(/work in progress/i));let r=!1;s&&(r=!![e.name,a.file,a.name||e.name,a.version,t,n?"WIP":""].join(",").match(s)),o.append(E("div").addClass("sp-msdl-file "+(r?"selected":"")).attr("data-mod-support-pack",a.file).attr("data-search-string",[a.name||e.name,a.version,t].join(" ")).append(E("p").addClass("filler "+l[t]).append(E("span").text(a.name||e.name),E("span").addClass("sp-msdl-file-version").text(a.version),E("span").addClass("sp-msdl-file-flavor").text(t),n?E("span").addClass("sp-msdl-file-wip-tag").text("Work In Progress"):"")).on("click",e=>{const a=$(e.currentTarget);a.is(".selected")?a.removeClass("selected"):a.addClass("selected")}))})}),CCInput(e.find(".sp-msdl-searchbar"),{placeholder:"Search mod support packs..."}).find("input").on("input",a=>{const s=$(a.currentTarget).val();e.find(".sp-msdl-file.hidden").removeClass("hidden"),s&&s.length&&e.find(".sp-msdl-file").filter((e,a)=>!~$(a).attr("data-search-string").toLowerCase().indexOf(s.toLowerCase())).addClass("hidden")}),CCInput(e.find(".sp-msdl-pack-format"),{placeholder:"Resource Pack Format",default:a.format?a.format:""}),e.find(".sp-msdl-download-button").on("click",a=>{const s=stash.notify("Downloading and merging packs. This may take a while.","working"),t=stash.blockInput(null,!1);Promise.all(o.children(".selected").toArray().map(e=>$.ajax(stash.url.cors+"https://bitbucket.org/DokucraftSaga/dokucraft-website/downloads/"+$(e).attr("data-mod-support-pack"),{xhrFields:{responseType:"blob"}}))).then(e=>Promise.all(e.map(e=>JSZip.loadAsync(e)))).then(e=>Promise.all(e.map(e=>Promise.all(Object.keys(e.files).filter(a=>!e.files[a].dir).map(a=>e.file(a).async("blob").then(e=>({name:a,content:e}))))))).then(a=>{const o=new JSZip;a.forEach(e=>e.forEach(e=>{e.name.match(/^assets/)&&o.file(e.name,e.content)}));let l=e.find(".sp-msdl-pack-format")[0].val();l=l&&e.find(".sp-msdl-pack-format")[0].val().length?parseInt(l):4,o.file("pack.mcmeta",JSON.stringify({pack:{pack_format:l,description:"§7Dokucraft Mod Support\n§rGenerated by §9DokuStash"}}).replace(/§/g,"\\u00A7")),$.ajax("resources/pack.png",{xhrFields:{responseType:"blob"}}).done(e=>{o.file("pack.png",e),o.generateAsync({type:"blob"}).then(e=>{stash.dismissNotification(s),stash.removeInputBlocker(t),saveAs(e,"Dokucraft-Mod-Support.zip")})}).fail(e=>{stash.notify("Failed to download pack.png",null,"error")})})}),e.find(".sp-msdl-deselect-all-button").on("click",a=>{e.find(".sp-msdl-file.selected").removeClass("selected")}),stash.workComplete()}).fail(e=>{stash.workError(),$("#files-table").remove(),stash.notify(`Failed to load file list. (${e.status} ${e.statusText})`,null,"error")})});</script><img onload="stash.page.identifierLoaded(this);void(0);" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="/>