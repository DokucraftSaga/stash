<h2 id="page-title">Dokucraft Update Status</h2><table class="js-rows highlight-rows" id="files-table" style="width:100%;"><col style="width:220px;"/><col/><col style="width:100px;"/><col style="width:100px;"/><col style="width:100px;"/><thead><tr><td class="no-extra-padding" id="total-number-of-textures"></td><td class="right-align"><span class="faded">Number of textures left:</span></td><th id="tl-light" scope="col"></th><th id="tl-dark" scope="col"></th><th id="tl-high" scope="col"></th></tr><tr><td class="right-align" colspan="2"><span class="faded">Complete:</span></td><th id="complete-light" scope="col"></th><th id="complete-dark" scope="col"></th><th id="complete-high" scope="col"></th></tr><tr><th>Category</th><th>File      <i class="faded">assets/minecraft/textures/...</i></th><th class="tt" title="Dokucraft Light&lt;br&gt;&lt;i&gt;Click to download patch&lt;/i&gt;"><a id="th-light">Light<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg></a></th><th class="tt" title="Dokucraft Dark&lt;br&gt;&lt;i&gt;Click to download patch&lt;/i&gt;"><a id="th-dark">Dark<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg></a></th><th class="tt" title="Dokucraft High&lt;br&gt;&lt;i&gt;Click to download patch&lt;/i&gt;"><a id="th-high">High<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg></a></th></tr></thead></table><link rel="stylesheet" href="/stash/pages/css/status.css"/><script>stash.page.hasWork=!0,stash.page.identifier().then(t=>{const a=/(.+\/)(.*)\.png/,e=/^\d+:.+$/,s=[85,255,136],r=[238,238,136],l=[238,51,102],i=()=>{if("wip"==stash.cache.status.gameVersion)return $("#page-title").text("Update Status Temporarily Unavailable").after(E("p").text("This page is unavailable while the file list is being updated.")),void $("#files-table").remove();$("#page-title").text("Dokucraft "+stash.cache.status.gameVersion+" Status");const i=$("#files-table");Object.keys(stash.cache.status.files).forEach(t=>{let s=E("tbody").addClass("row-group");stash.cache.status.files[t].forEach((r,l)=>{let i=a.exec(r.name),o=E("tr");0==l&&o.append(E("th").text(t).attr("rowspan",stash.cache.status.files[t].length).attr("scope","rowgroup")),o.append(E("td").addClass("filepath").append(E("span").addClass("img-container tt").attr("title",E("img").attr("src","data:image/png;base64,"+r.texture).addClass("min-128 pixelated transparent")[0].outerHTML).append(E("img").attr("src","data:image/png;base64,"+r.texture))).append(E("span").text(i[1]).addClass("faded")).append(i[2]).append(E("span").text(".png").addClass("faded")));let n=E("td").addClass("no-extra-padding light").appendTo(o);if(r.light.length>0&&!isNaN(r.light))n.append(E("a").text("#"+r.light).attr("href",toURLParams({details:r.light}))).addClass("link tt good").attr("title","View file details").on("click",t=>{stash.page.modal(toURLParams({details:r.light})).children(".content").css("width","800px"),t.preventDefault()});else if(r.light.length>0&&r.light.match(e)){const t=r.light.split(":");n.append(E("a").text("#"+t[0]+"*").attr("href",toURLParams({details:r.light}))).addClass("link tt good").attr("title",`View file details<br><i>${t[1]}</i>`).on("click",t=>{stash.page.modal(toURLParams({details:r.light})).children(".content").css("width","800px"),t.preventDefault()})}else r.light.length>0?n.addClass("good").text(r.light):n.addClass("bad");!isNaN(r.rowspanLight)&&r.rowspanLight.length>0&&n.attr("rowspan",r.rowspanLight);let h=E("td").addClass("no-extra-padding dark").appendTo(o);if(r.dark.length>0&&!isNaN(r.dark))h.append(E("a").text("#"+r.dark).attr("href",toURLParams({details:r.dark}))).addClass("link tt good").attr("title","View file details").on("click",t=>{stash.page.modal(toURLParams({details:r.dark})).children(".content").css("width","800px"),t.preventDefault()});else if(r.dark.length>0&&r.dark.match(e)){const t=r.dark.split(":");h.append(E("a").text("#"+t[0]+"*").attr("href",toURLParams({details:r.dark}))).addClass("link tt good").attr("title",`View file details<br><i>${t[1]}</i>`).on("click",t=>{stash.page.modal(toURLParams({details:r.dark})).children(".content").css("width","800px"),t.preventDefault()})}else r.dark.length>0?h.addClass("good").text(r.dark):h.addClass("bad");!isNaN(r.rowspanDark)&&r.rowspanDark.length>0&&h.attr("rowspan",r.rowspanDark);let d=E("td").addClass("no-extra-padding high").appendTo(o);if(r.high.length>0&&!isNaN(r.high))d.append(E("a").text("#"+r.high).attr("href",toURLParams({details:r.high}))).addClass("link tt good").attr("title","View file details").on("click",t=>{stash.page.modal(toURLParams({details:r.high})).children(".content").css("width","800px"),t.preventDefault()});else if(r.high.length>0&&r.high.match(e)){const t=r.high.split(":");d.append(E("a").text("#"+t[0]+"*").attr("href",toURLParams({details:r.high}))).addClass("link tt good").attr("title",`View file details<br><i>${t[1]}</i>`).on("click",t=>{stash.page.modal(toURLParams({details:r.high})).children(".content").css("width","800px"),t.preventDefault()})}else r.high.length>0?d.addClass("good").text(r.high):d.addClass("bad");!isNaN(r.rowspanHigh)&&r.rowspanHigh.length>0&&d.attr("rowspan",r.rowspanHigh),s.append(o)}),i.append(s)}),i.find("tr:even").addClass("even");let o=i.find(".filepath").length;$("#total-number-of-textures").text(o+" total textures");let n=i.find(".light:not(:empty)").toArray().reduce((t,a)=>t+($(a).attr("rowspan")?parseInt($(a).attr("rowspan")):1),0),h=n/o,d=[Math.floor(h>.5?lerp(r[0],s[0],2*h-1):lerp(l[0],r[0],2*h)),Math.floor(h>.5?lerp(r[1],s[1],2*h-1):lerp(l[1],r[1],2*h)),Math.floor(h>.5?lerp(r[2],s[2],2*h-1):lerp(l[2],r[2],2*h))];$("#tl-light").text(o-n).css("color",`rgb(${d.join(",")})`),$("#complete-light").text(Math.floor(100*h)+"%").css("color",`rgb(${d.join(",")})`);let p=i.find(".dark:not(:empty)").toArray().reduce((t,a)=>t+($(a).attr("rowspan")?parseInt($(a).attr("rowspan")):1),0),c=p/o,g=[Math.floor(c>.5?lerp(r[0],s[0],2*c-1):lerp(l[0],r[0],2*c)),Math.floor(c>.5?lerp(r[1],s[1],2*c-1):lerp(l[1],r[1],2*c)),Math.floor(c>.5?lerp(r[2],s[2],2*c-1):lerp(l[2],r[2],2*c))];$("#tl-dark").text(o-p).css("color",`rgb(${g.join(",")})`),$("#complete-dark").text(Math.floor(100*c)+"%").css("color",`rgb(${g.join(",")})`);let f=i.find(".high:not(:empty)").toArray().reduce((t,a)=>t+($(a).attr("rowspan")?parseInt($(a).attr("rowspan")):1),0),m=f/o,u=[Math.floor(m>.5?lerp(r[0],s[0],2*m-1):lerp(l[0],r[0],2*m)),Math.floor(m>.5?lerp(r[1],s[1],2*m-1):lerp(l[1],r[1],2*m)),Math.floor(m>.5?lerp(r[2],s[2],2*m-1):lerp(l[2],r[2],2*m))];$("#tl-high").text(o-f).css("color",`rgb(${u.join(",")})`),$("#complete-high").text(Math.floor(100*f/o)+"%").css("color",`rgb(${u.join(",")})`),i.floatThead({scrollContainer:()=>i.closest(".stash-page-scroller")}),$("body").addClass("disable-sidebar-animation"),t[0].onSidebarToggle=(()=>{i.floatThead("reflow")}),t[0].onUnload=(()=>{i.floatThead("destroy"),$("body").removeClass("disable-sidebar-animation")}),tippy(t.closest(".stash-page-wrapper").find(".tt").toArray(),{arrow:!0,animation:"perspective"})},o=t=>{stash.workIndeterminate();const a=new JSZip,e=t.replace(/^(.)/,(t,a)=>a.toUpperCase()),s=[];Object.keys(stash.cache.status.files).forEach(a=>{stash.cache.status.files[a].forEach((a,e)=>{a[t].length>0&&s.push(a)})});const r=new Set(stash.search({id:s.map(a=>a[t].split(":")[0]).join(",")})),l=[];let i=0;a.file("pack.mcmeta",JSON.stringify({pack:{pack_format:stash.cache.status.packFormat,description:`§7Dokucraft ${e} Patch for ${stash.cache.status.gameVersion}\n§rGenerated by §9DokuStash`}}).replace(/§/g,"\\u00A7")),l.push($.ajax("resources/pack.png",{xhrFields:{responseType:"blob"}}).done(t=>{a.file("pack.png",t)}).fail(t=>{stash.notify(`Failed to download file: pack.png<br>(${t.status} ${t.statusText})`,null,"error")})),r.forEach(e=>{const r=getExt(e),o=getID(e),n=stash.data[e].S;"png"==r?s.filter(a=>a[t]==o).forEach(t=>{l.push($.ajax(stashURL+e,{xhrFields:{responseType:"blob"}}).done(e=>{a.file("assets/minecraft/textures/"+t.name,e,{createFolders:!0}),stash.setWorkProgress(Math.floor(100*++i/s.length))}).fail(t=>{stash.notify(`Failed to download file: ${e}<br>(${t.status} ${t.statusText})`,null,"error")})),stash.data[e].M?l.push($.ajax(stashURL+e+".mcmeta",{xhrFields:{responseType:"blob"}}).done(e=>{a.file("assets/minecraft/textures/"+t.name+".mcmeta",e,{createFolders:!0})}).fail(t=>{stash.notify(`Failed to download file: ${e}.mcmeta<br>(${t.status} ${t.statusText})`,null,"error")})):n[1]/n[0]>=6&&n[1]%n[0]==0&&a.file("assets/minecraft/textures/"+t.name+".mcmeta","{animation:{}}",{createFolders:!0})}):l.push(stash.getZIPContent(e).then(e=>{s.filter(a=>a[t].split(":")[0]==o).forEach(r=>{const o=r[t].split(":")[1],n=e.find(t=>o==(t.path.length>0?t.path+"/":"")+t.name).content;a.file("assets/minecraft/textures/"+r.name,n,{base64:!0,createFolders:!0});const h=e.find(t=>o+".mcmeta"==(t.path.length>0?t.path+"/":"")+t.name);h?a.file("assets/minecraft/textures/"+r.name+".mcmeta",h.content,{createFolders:!0}):l.push(stash.getImage("data:image/png;base64,"+n).then(t=>{t.height/t.width>=6&&t.height%t.width==0&&a.file("assets/minecraft/textures/"+r.name+".mcmeta","{animation:{}}",{createFolders:!0})})),stash.setWorkProgress(Math.floor(100*++i/s.length))})}))}),Promise.all(l).then(()=>{a.generateAsync({type:"blob"}).then(t=>{saveAs(t,`${stash.cache.status.gameVersion}-Dokucraft-${e}-Patch.zip`),stash.workComplete()})}).catch(t=>{stash.notify("An error occurred.<br>"+t.toString(),null,"error")})};stash.cache.status?(i(),stash.workComplete()):$.ajax(cors+"https://docs.google.com/spreadsheets/u/0/d/1b4ciAAKqsSwgVSZs1_jyAsz3ef8GPG9ijjg895PIrDw/export?format=csv&id=1b4ciAAKqsSwgVSZs1_jyAsz3ef8GPG9ijjg895PIrDw&gid=0").done(t=>{stash.cache.status={gameVersion:"n/a",files:{}},t.split("\n").map(t=>t.split(",").map(t=>t.trim())).forEach((t,a)=>{if(0==a)return stash.cache.status.gameVersion=t[0],void(stash.cache.status.packFormat=parseInt(t[1]));stash.cache.status.files.hasOwnProperty(t[0])||(stash.cache.status.files[t[0]]=[]),stash.cache.status.files[t[0]].push({name:t[1],light:t[2],dark:t[3],high:t[4],note:t[5],texture:t[9]})}),i(),$("#th-light").on("click",()=>o("light")),$("#th-dark").on("click",()=>o("dark")),$("#th-high").on("click",()=>o("high")),stash.workComplete()}).fail(t=>{stash.workError(),$("#files-table").remove(),stash.notify(`Failed to load file list. (${t.status} ${t.statusText})`,null,"error")})});</script><img onload="stash.page.identifierLoaded(this);void(0);" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="/>