<h2 id="page-title">Dokucraft Update Status</h2><h4 class="faq-button">Have any questions about the update? Click here!</h4><table class="js-rows highlight-rows" id="files-table" style="width:100%;"><col style="width:220px;"/><col/><col style="width:100px;"/><col style="width:100px;"/><col style="width:100px;"/><thead><tr><td class="no-extra-padding" id="total-number-of-textures"></td><td class="right-align"><span class="faded">Number of textures left:</span></td><th id="tl-light" scope="col"></th><th id="tl-dark" scope="col"></th><th id="tl-high" scope="col"></th></tr><tr><td class="right-align" colspan="2"><span class="faded">Complete:</span></td><th id="complete-light" scope="col"></th><th id="complete-dark" scope="col"></th><th id="complete-high" scope="col"></th></tr><tr><th>Category</th><th>File      <i class="faded">assets/minecraft/textures/...</i></th><th class="tt" title="Dokucraft Light&lt;br&gt;&lt;i&gt;Click to download patch&lt;/i&gt;"><a id="th-light">Light<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg></a></th><th class="tt" title="Dokucraft Dark&lt;br&gt;&lt;i&gt;Click to download patch&lt;/i&gt;"><a id="th-dark">Dark<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg></a></th><th class="tt" title="Dokucraft High&lt;br&gt;&lt;i&gt;Click to download patch&lt;/i&gt;"><a id="th-high">High<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg></a></th></tr></thead></table><link rel="stylesheet" href="/stash/pages/css/status.css"/><script>stash.page.hasWork=!0,stash.page.identifier().then(t=>{const e=/(.+\/)(.*)\.png/,a=/^\d+:.+$/,s=[85,255,136],r=[255,238,119],o=[238,51,102],l=()=>{if("wip"==stash.cache.status.gameVersion)return $("#page-title").text("Update Status Temporarily Unavailable").after(E("p").text("This page is unavailable while the file list is being updated.")),void $("#files-table").remove();$("#page-title").text("Dokucraft "+stash.cache.status.gameVersion+" Status");const l=$("#files-table");Object.keys(stash.cache.status.files).forEach(t=>{let s=E("tbody").addClass("row-group");stash.cache.status.files[t].forEach((r,o)=>{let l=e.exec(r.name),i=E("tr");0==o&&i.append(E("th").text(t).attr("rowspan",stash.cache.status.files[t].length).attr("scope","rowgroup")),i.append(E("td").addClass("filepath").append(E("span").addClass("img-container tt").attr("title",E("img").attr("src","data:image/png;base64,"+r.texture).addClass("min-128 pixelated transparent")[0].outerHTML).append(E("img").attr("src","data:image/png;base64,"+r.texture))).append(E("span").text(l[1]).addClass("faded")).append(l[2]).append(E("span").text(".png").addClass("faded")));let n=E("td").addClass("no-extra-padding light").appendTo(i);if(r.light.length>0&&!isNaN(r.light))n.append(E("a").text("#"+r.light).attr("href",toURLParams({details:r.light}))).addClass("link tt good").attr("title","View file details").on("click",t=>{stash.page.modal(toURLParams({details:r.light})).children(".content").css("width","800px"),t.preventDefault()});else if(r.light.length>0&&r.light.match(a)){const t=r.light.split(":");n.append(E("a").text("#"+t[0]+"*").attr("href",toURLParams({details:r.light}))).addClass("link tt good").attr("title",`View file details<br><i>${t[1]}</i>`).on("click",t=>{stash.page.modal(toURLParams({details:r.light})).children(".content").css("width","800px"),t.preventDefault()})}else r.light.length>0?n.addClass("good").text(r.light):n.addClass("bad");!isNaN(r.rowspanLight)&&r.rowspanLight.length>0&&n.attr("rowspan",r.rowspanLight);let h=E("td").addClass("no-extra-padding dark").appendTo(i);if(r.dark.length>0&&!isNaN(r.dark))h.append(E("a").text("#"+r.dark).attr("href",toURLParams({details:r.dark}))).addClass("link tt good").attr("title","View file details").on("click",t=>{stash.page.modal(toURLParams({details:r.dark})).children(".content").css("width","800px"),t.preventDefault()});else if(r.dark.length>0&&r.dark.match(a)){const t=r.dark.split(":");h.append(E("a").text("#"+t[0]+"*").attr("href",toURLParams({details:r.dark}))).addClass("link tt good").attr("title",`View file details<br><i>${t[1]}</i>`).on("click",t=>{stash.page.modal(toURLParams({details:r.dark})).children(".content").css("width","800px"),t.preventDefault()})}else r.dark.length>0?h.addClass("good").text(r.dark):h.addClass("bad");!isNaN(r.rowspanDark)&&r.rowspanDark.length>0&&h.attr("rowspan",r.rowspanDark);let d=E("td").addClass("no-extra-padding high").appendTo(i);if(r.high.length>0&&!isNaN(r.high))d.append(E("a").text("#"+r.high).attr("href",toURLParams({details:r.high}))).addClass("link tt good").attr("title","View file details").on("click",t=>{stash.page.modal(toURLParams({details:r.high})).children(".content").css("width","800px"),t.preventDefault()});else if(r.high.length>0&&r.high.match(a)){const t=r.high.split(":");d.append(E("a").text("#"+t[0]+"*").attr("href",toURLParams({details:r.high}))).addClass("link tt good").attr("title",`View file details<br><i>${t[1]}</i>`).on("click",t=>{stash.page.modal(toURLParams({details:r.high})).children(".content").css("width","800px"),t.preventDefault()})}else r.high.length>0?d.addClass("good").text(r.high):d.addClass("bad");!isNaN(r.rowspanHigh)&&r.rowspanHigh.length>0&&d.attr("rowspan",r.rowspanHigh),s.append(i)}),l.append(s)}),l.find("tr:even").addClass("even");let i=l.find(".filepath").length;$("#total-number-of-textures").text(i+" total textures");let n=l.find(".light:not(:empty)").toArray().reduce((t,e)=>t+($(e).attr("rowspan")?parseInt($(e).attr("rowspan")):1),0),h=n/i,d=[Math.floor(h>.5?lerp(r[0],s[0],2*h-1):lerp(o[0],r[0],2*h)),Math.floor(h>.5?lerp(r[1],s[1],2*h-1):lerp(o[1],r[1],2*h)),Math.floor(h>.5?lerp(r[2],s[2],2*h-1):lerp(o[2],r[2],2*h))];$("#tl-light").text(i-n).css("color",`rgb(${d.join(",")})`),$("#complete-light").text(Math.floor(100*h)+"%").css("color",`rgb(${d.join(",")})`);let p=l.find(".dark:not(:empty)").toArray().reduce((t,e)=>t+($(e).attr("rowspan")?parseInt($(e).attr("rowspan")):1),0),c=p/i,g=[Math.floor(c>.5?lerp(r[0],s[0],2*c-1):lerp(o[0],r[0],2*c)),Math.floor(c>.5?lerp(r[1],s[1],2*c-1):lerp(o[1],r[1],2*c)),Math.floor(c>.5?lerp(r[2],s[2],2*c-1):lerp(o[2],r[2],2*c))];$("#tl-dark").text(i-p).css("color",`rgb(${g.join(",")})`),$("#complete-dark").text(Math.floor(100*c)+"%").css("color",`rgb(${g.join(",")})`);let f=l.find(".high:not(:empty)").toArray().reduce((t,e)=>t+($(e).attr("rowspan")?parseInt($(e).attr("rowspan")):1),0),m=f/i,u=[Math.floor(m>.5?lerp(r[0],s[0],2*m-1):lerp(o[0],r[0],2*m)),Math.floor(m>.5?lerp(r[1],s[1],2*m-1):lerp(o[1],r[1],2*m)),Math.floor(m>.5?lerp(r[2],s[2],2*m-1):lerp(o[2],r[2],2*m))];$("#tl-high").text(i-f).css("color",`rgb(${u.join(",")})`),$("#complete-high").text(Math.floor(100*f/i)+"%").css("color",`rgb(${u.join(",")})`),l.floatThead({scrollContainer:()=>l.closest(".stash-page-scroller")}),$("body").addClass("disable-sidebar-animation"),t[0].onSidebarToggle=(()=>{l.floatThead("reflow")}),t[0].onUnload=(()=>{l.floatThead("destroy"),$("body").removeClass("disable-sidebar-animation")}),tippy(t.closest(".stash-page-wrapper").find(".tt").toArray(),{arrow:!0,animation:"perspective"})},i=t=>{stash.workIndeterminate();const e=new JSZip,a=t.replace(/^(.)/,(t,e)=>e.toUpperCase()),s=[];Object.keys(stash.cache.status.files).forEach(e=>{stash.cache.status.files[e].forEach((e,a)=>{e[t].length>0&&s.push(e)})});const r=new Set(stash.search({id:s.map(e=>e[t].split(":")[0]).join(",")})),o=[];let l=0;e.file("pack.mcmeta",JSON.stringify({pack:{pack_format:stash.cache.status.packFormat,description:`§7Dokucraft ${a} Patch for ${stash.cache.status.gameVersion}\n§rGenerated by §9DokuStash`}}).replace(/§/g,"\\u00A7")),o.push($.ajax("resources/pack.png",{xhrFields:{responseType:"blob"}}).done(t=>{e.file("pack.png",t)}).fail(t=>{stash.notify(`Failed to download file: pack.png<br>(${t.status} ${t.statusText})`,null,"error")})),r.forEach(a=>{const r=getExt(a),i=getID(a),n=stash.data[a].S;"png"==r?s.filter(e=>e[t]==i).forEach(t=>{o.push($.ajax(stashURL+a,{xhrFields:{responseType:"blob"}}).done(a=>{e.file("assets/minecraft/textures/"+t.name,a,{createFolders:!0}),stash.setWorkProgress(Math.floor(100*++l/s.length))}).fail(t=>{stash.notify(`Failed to download file: ${a}<br>(${t.status} ${t.statusText})`,null,"error")})),stash.data[a].M?o.push($.ajax(stashURL+a+".mcmeta",{xhrFields:{responseType:"blob"}}).done(a=>{e.file("assets/minecraft/textures/"+t.name+".mcmeta",a,{createFolders:!0})}).fail(t=>{stash.notify(`Failed to download file: ${a}.mcmeta<br>(${t.status} ${t.statusText})`,null,"error")})):n[1]/n[0]>=6&&n[1]%n[0]==0&&e.file("assets/minecraft/textures/"+t.name+".mcmeta","{animation:{}}",{createFolders:!0})}):o.push(stash.getZIPContent(a).then(a=>{s.filter(e=>e[t].split(":")[0]==i).forEach(r=>{const i=r[t].split(":")[1],n=a.find(t=>i==(t.path.length>0?t.path+"/":"")+t.name).content;e.file("assets/minecraft/textures/"+r.name,n,{base64:!0,createFolders:!0});const h=a.find(t=>i+".mcmeta"==(t.path.length>0?t.path+"/":"")+t.name);h?e.file("assets/minecraft/textures/"+r.name+".mcmeta",h.content,{createFolders:!0}):o.push(stash.getImage("data:image/png;base64,"+n).then(t=>{t.height/t.width>=6&&t.height%t.width==0&&e.file("assets/minecraft/textures/"+r.name+".mcmeta","{animation:{}}",{createFolders:!0})})),stash.setWorkProgress(Math.floor(100*++l/s.length))})}))}),Promise.all(o).then(()=>{e.generateAsync({type:"blob"}).then(t=>{saveAs(t,`${stash.cache.status.gameVersion}-Dokucraft-${a}-Patch.zip`),stash.workComplete()})}).catch(t=>{stash.notify("An error occurred.<br>"+t.toString(),null,"error")})};t.find(".faq-button").on("click",()=>{stash.page.modal(null,t.closest(".stash-page-wrapper")).find(".content").css("width","800px").append(E("h2").text("1.13 Update FAQ"),E("h4").text("Why won't Dokucraft 1.12 packs work with 1.13?"),E("p").append("It won't simply work because most resource files in the game were renamed in 1.13. Texture files needs to be renamed and models, blockstate files and other things like CTM support will need to be updated. More info about this can be found ",E("a").text("here").attr("href","https://minecraft.gamepedia.com/1.13/Flattening#Game_Assets")," in the Game Assets section."),E("h4").text("When is Dokucraft being updated to 1.13?"),E("p").append("There is currently no ",E("span").text("ETA").attr("title","Estimated Time of Arrival"),", but you can check this page for progress. Remember that contributing can lead to the packs' completion faster."),E("h4").text("Want to help?"),E("p").append("We have a ",E("a").text("quick start guide").attr("href","https://docs.google.com/document/d/1HsC6ut8ytQOQLyM17X6f2AHH0pDHCv23YSxav9odIm4/view")," to help people learn how to edit resource packs. If you have any questions about contributing or anything else Dokucraft related, feel free to ask on our ",E("a").text("Discord server").attr("href","https://dokucraft.co.uk/discord"),"."))}),stash.cache.status?(l(),stash.workComplete()):$.ajax(cors+"https://docs.google.com/spreadsheets/u/0/d/1b4ciAAKqsSwgVSZs1_jyAsz3ef8GPG9ijjg895PIrDw/export?format=csv&id=1b4ciAAKqsSwgVSZs1_jyAsz3ef8GPG9ijjg895PIrDw&gid=0").done(t=>{stash.cache.status={gameVersion:"n/a",files:{}},t.split("\n").map(t=>t.split(",").map(t=>t.trim())).forEach((t,e)=>{if(0==e)return stash.cache.status.gameVersion=t[0],void(stash.cache.status.packFormat=parseInt(t[1]));stash.cache.status.files.hasOwnProperty(t[0])||(stash.cache.status.files[t[0]]=[]),stash.cache.status.files[t[0]].push({name:t[1],light:t[2],dark:t[3],high:t[4],note:t[5],texture:t[9]})}),l(),$("#th-light").on("click",()=>i("light")),$("#th-dark").on("click",()=>i("dark")),$("#th-high").on("click",()=>i("high")),stash.workComplete()}).fail(t=>{stash.workError(),$("#files-table").remove(),stash.notify(`Failed to load file list. (${t.status} ${t.statusText})`,null,"error")})});</script><img onload="stash.page.identifierLoaded(this);void(0);" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="/>