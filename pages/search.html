<div class="sp-search-wrapper"><div class="sidebar" style="opacity:0;"><div class="expand-button sidebar-button"><?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24"><path d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" /></svg><span>Collapse</span></div><div class="filler"></div><div class="result-count-wrapper tt" title="&lt;h3&gt;Result Count&lt;/h3&gt;&lt;i class=&quot;faded&quot;&gt;Number of files displayed&lt;/i&gt;"><div class="result-count">0</div><span class="result-count-text"> file</span></div><div class="select-all-button sidebar-button tt" title="&lt;h3&gt;Select All&lt;/h3&gt;&lt;i class=&quot;faded&quot;&gt;Right-click files to select them individually&lt;/i&gt;"><?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24"><path d="M22,16A2,2 0 0,1 20,18H8C6.89,18 6,17.1 6,16V4C6,2.89 6.89,2 8,2H20A2,2 0 0,1 22,4V16M16,20V22H4A2,2 0 0,1 2,20V7H4V20H16M13,14L20,7L18.59,5.59L13,11.17L9.91,8.09L8.5,9.5L13,14Z" /></svg><span>Select All</span></div><div class="stats-button sidebar-button tt" title="&lt;h3&gt;Statistics&lt;/h3&gt;&lt;i class=&quot;faded&quot;&gt;Show statistics for the current search results&lt;/i&gt;"><?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24"><path d="M17.45,15.18L22,7.31V19L22,21H2V3H4V15.54L9.5,6L16,9.78L20.24,2.45L21.97,3.45L16.74,12.5L10.23,8.75L4.31,19H6.57L10.96,11.44L17.45,15.18Z" /></svg><span>Statistics</span></div><div class="display-options-button sidebar-button tt" title="&lt;h3&gt;Display Options&lt;/h3&gt;&lt;i class=&quot;faded&quot;&gt;Scaling, grouping and sorting&lt;/i&gt;"><?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24"><path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" /></svg><span>Display Options</span></div></div><div class="sp-search-results-wrapper"><div class="filler"></div><div class="search-results" style="opacity:0;"></div><div class="filler"></div></div></div><link rel="stylesheet" href="/stash/pages/css/search.css"/><script>stash.page.identifier().then(a=>{const t=getURLParams(a.attr("data-params")),s=a.find(".search-results"),e=a.find(".result-count"),i=a.find(".result-count-text"),n=stash.query.parse(t.search);if(a.is("#content")){const a=stash.query.toString(n);t.mask||$("#searchbar input").val(a),history.replaceState(null,"",toURLParams({search:a,mask:t.mask}))}let d;d=t.mask?stash.search(n,stash.files,stash.selection.decodeMask(t.mask)):stash.search(n);const r=a=>{1==a?i.addClass("singular"):i.removeClass("singular"),e.text(a)},l=(a,t)=>{const s=stash.data[t].size,e=E("div").append(E("h3").text(`${stash.data[t].contributor} #${stash.data[t].id}`));stash.data[t].packageType?e.append(E("div").addClass("row").html($("#package-icon").html()+` ${stash.typeNames[stash.data[t].packageType]}`)):(e.append(E("div").addClass("row").html($("#aspect-ratio-icon").html()+` ${s[0]}x${s[1]}`)),stash.data[t].mcmeta&&e.append(E("div").addClass("row").html($("#code-icon").html()+" Custom MCMETA file"))),e.append(E("p").append(E("div").addClass("row").html($("#calendar-icon").html()+" "+formatDate(stash.data[t].timestamp))),stash.tags.element(t).addClass("compact").css("margin-top","12px")),a.attr("title",e[0].innerHTML)},p=t=>{a.find(".file").css({width:128*t+"px",height:128*t+"px"}),t>1?a.addClass("disable-thumbnails"):a.removeClass("disable-thumbnails")},o=(a,t)=>{let e=s.children(`.group[data-group="${t}"]`);0==e.length&&(e=E("div").addClass("group").append(E("h3").text(t)).attr("data-group",t),s.append(e)),$(a).appendTo(e)},c=(a,t,e)=>{const i=s.find(".result").detach();s.children(".group").remove(),"none"!=a?i.each((t,s)=>{const e=$(s).attr("data-file");if("contributor"==a){const a=stash.data[e].contributor;o(s,a)}else if("year"==a){const a=stash.data[e].date.getFullYear();o(s,a)}else if("size"==a){const a=stash.data[e].size,t=stash.data[e].packageType?"ZIP":a[1]>6*a[0]?"Animation Strips":a.join("x");o(s,t)}else if("type"==a){let a="Image";if(stash.data[e].packageType)a=stash.typeNames[stash.data[e].packageType];else{const t=stash.data[e].size;(stash.data[e].M||t[1]/t[0]>=6&&t[1]%t[0]==0)&&(a="Animation")}o(s,a)}}):i.appendTo(s);const n=a=>{const s=a.children(".result").toArray().sort((a,s)=>{const e=$(a).attr("data-file"),i=$(s).attr("data-file");if("contributor"==t){const a=naturalSorter(stash.data[e].contributor,stash.data[i].contributor);return 0!=a?a:naturalSorter(e,i)}if("id"==t)return idSort(e,i);if("size"==t){const a=stash.data[e].size,t=stash.data[i].size,s=a[0]*a[1]-t[0]*t[1];return 0!=s?s:naturalSorter(e,i)}});"des"==e&&s.reverse(),a.append(s)};if("none"!=a){const t=s.children(".group").toArray().sort((t,s)=>{const e=$(t).children("h3").text(),i=$(s).children("h3").text();if("size"==a){if("Animation Strips"==e||"ZIP"==e&&"Animation Strips"!=i)return-1;if("Animation Strips"==i||"ZIP"==i&&"Animation Strips"!=e)return 1;const a=e.split("x").map(a=>parseInt(a)),t=i.split("x").map(a=>parseInt(a));return a[0]*a[1]-t[0]*t[1]}return naturalSorter(e,i)});s.append(t),s.children(".group").each((a,t)=>{n($(t))})}else n(s);s.children(".group").removeClass("hidden").each((a,t)=>{0==$(t).children(".result:visible").length&&$(t).addClass("hidden")})},h=()=>{requestAnimationFrame(()=>{s.animate({opacity:1},500),a.find(".sp-search-wrapper .sidebar").animate({opacity:1},500)})};a.find(".sp-search-wrapper .expand-button").on("click",()=>a.find(".sp-search-wrapper .sidebar").toggleClass("expanded")),a.find(".sp-search-wrapper .select-all-button").on("click",()=>stash.selection.add(a.find(".file:not(.hidden)").toArray().map(a=>$(a).attr("data-file")))),a.find(".sp-search-wrapper .stats-button").on("click",()=>{stash.page.modal(null,a.closest(".stash-page-wrapper")).find(".content").append(E("h2").text("Statistics"),stash.chart.timeline(d,{title:"Number of files over time",dataHandler:(a,t)=>a.map(a=>t[a].length).reduce((a,t)=>a.push((a.length&&a[a.length-1]||0)+t)&&a,[])},{title:"Files added per quarter",dataHandler:(a,t)=>a.map(a=>t[a].length)},{title:"Number of contributors",dataHandler:(a,t)=>a.map(a=>t[a].reduce((a,t)=>a.add(stash.data[t].contributor),new Set)).map((a,t,s)=>s.slice(0,t+1).reduce((a,t)=>(t.forEach(t=>a.add(t)),a),new Set).size)},{title:"Active contributors per quarter",dataHandler:(a,t)=>a.map(a=>t[a].reduce((a,t)=>a.add(stash.data[t].contributor),new Set).size)}))}),a.find(".sp-search-wrapper .display-options-button").on("click",()=>{const t=stash.page.modal(null,a.closest(".stash-page-wrapper"));t.find(".content").addClass("sp-search-modal").css("width","800px").append(E("h3").text("Display Scale"),E("div").addClass("display-scale").css("width","260px"),E("h3").text("Grouping"),E("div").addClass("display-grouping").css("width","260px"),E("h3").text("Sorting"),E("div").addClass("row").append(E("div").addClass("display-sorting").css("width","260px"),E("div").addClass("display-order").css("width","260px")),E("br"),E("div").addClass("button inline").text("Done").on("click",a=>{stash.displayOptions={grouping:t.find(".display-grouping")[0].val(),sorting:t.find(".display-sorting")[0].val(),order:t.find(".display-order")[0].val(),scale:parseInt(t.find(".display-scale")[0].val())},c(stash.displayOptions.grouping,stash.displayOptions.sorting,stash.displayOptions.order),p(stash.displayOptions.scale),stash.page.closeModal(t)}),E("div").addClass("button inline").text("Cancel").on("click",a=>stash.page.closeModal(t)),E("div").addClass("button inline").text("Reset").on("click",a=>{t.find(".display-grouping")[0].val("none"),t.find(".display-sorting")[0].val("id"),t.find(".display-order")[0].val("des"),t.find(".display-scale")[0].val("1")})),CCInput(t.find(".display-scale"),{type:"select",lists:[{name:"Scale Options",list:[{name:"1x"+E("span").addClass("faded").text(" - 128x128 px")[0].outerHTML,value:"1",selected:1==stash.displayOptions.scale},{name:"2x"+E("span").addClass("faded").text(" - 256x256 px")[0].outerHTML,value:"2",selected:2==stash.displayOptions.scale},{name:"3x"+E("span").addClass("faded").text(" - 384x384 px")[0].outerHTML,value:"3",selected:3==stash.displayOptions.scale},{name:"4x"+E("span").addClass("faded").text(" - 512x512 px")[0].outerHTML,value:"4",selected:4==stash.displayOptions.scale}]}]}),CCInput(t.find(".display-grouping"),{type:"select",lists:[{name:"Grouping Options",list:[{name:"No groups",value:"none",selected:"none"==stash.displayOptions.grouping},{name:"Group by contributor",value:"contributor",selected:"contributor"==stash.displayOptions.grouping},{name:"Group by year",value:"year",selected:"year"==stash.displayOptions.grouping},{name:"Group by size",value:"size",selected:"size"==stash.displayOptions.grouping},{name:"Group by type",value:"type",selected:"type"==stash.displayOptions.grouping}]}]}),CCInput(t.find(".display-sorting"),{type:"select",lists:[{name:"Sorting Options",list:[{name:"Sort by contributor",value:"contributor",selected:"contributor"==stash.displayOptions.sorting},{name:"Sort by date",value:"id",selected:"id"==stash.displayOptions.sorting},{name:"Sort by size",value:"size",selected:"size"==stash.displayOptions.sorting}]}]}),CCInput(t.find(".display-order"),{type:"select",lists:[{name:"Sort Order",list:[{name:"Ascending",value:"asc",selected:"asc"==stash.displayOptions.order},{name:"Descending",value:"des",selected:"des"==stash.displayOptions.order}]}]})}),tippy(a.find(".sp-search-wrapper .tt").toArray(),{placement:"right",dynamicTitle:!0}),a[0].onTagsUpdate=(()=>{a.find(".result").each((a,t)=>{l($(t),$(t).attr("data-file"))})}),stash.page.optimizeScrolling(a.find(".sp-search-wrapper .search-results")),(t=>{if(0==t.length)return s.append(E("div").addClass("hint").text("No results")),r(0),void h();if(t.length>2500)return s.append(E("div").addClass("hint").text("Too many results (2500+), try narrowing your search")),r(0),void h();r(t.length);for(let e=0;e<t.length;e++){let i=t[e],n=createFilePreview(i,E("a").addClass("result").attr("href",toURLParams({details:stash.data[i].id})));stash.selection.contains(i)&&n.addClass("selected"),n.on("click",t=>{stash.page.modal(toURLParams({details:stash.data[i].id}),a.closest(".stash-page-wrapper")),t.preventDefault()}),n.on("contextmenu",a=>{stash.selection.contains(i)?stash.selection.remove(i):stash.selection.add(i),a.preventDefault(),a.stopPropagation()}),l(n,i),tippy(n[0],{placement:"right",dynamicTitle:!0}),s.append(n)}c(stash.displayOptions.grouping,stash.displayOptions.sorting,stash.displayOptions.order),p(stash.displayOptions.scale),h()})(d.sort(naturalSorter))});</script><img onload="stash.page.identifierLoaded(this);void(0);" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="/>