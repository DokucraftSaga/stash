<script>(()=>{stash.page.onRemove=(()=>{$(".remove-on-page-change").remove(),$("#sorting-options").addClass("hidden")}),$("#title").after($("<h2>",{id:"results-count",class:"remove-on-page-change"})),$("#results-count").after($("<div>",{id:"select-all-button",class:"header-button remove-on-page-change",text:"Select All"}).on("click",e=>{stash.selectFiles($("#content .file:not(.hidden)").toArray().map(e=>$(e).attr("data-file")))})),$("#select-all-button").after($("<div>",{id:"header-hint",class:"remove-on-page-change",text:"Right-click to select individual files"}));let e=decodeQuery();setSearchFormVals(e.category,e.contributor,e.id,e.size,e.color),e.id=stringToIDList(e.id),e.size=stringToSize(e.size);let t=stash.files.all;null!=e.category&&e.category.length>0&&(t=stash.files.category[e.category]),null!=e.contributor&&e.contributor.length>0&&(t=t.filter(contributorFilter(e.contributor))),null!=e.id&&e.id.length>0&&(t=t.filter(idFilter(e.id))),null!=e.size&&(t=t.filter(sizeFilter(e.size))),(e=>{if($("#content").empty(),0==e.length)return $("#content").append($("<div>",{class:"hint",text:"No results"})),void $("#results-count").text("");if(e.length>2500)return $("#content").append($("<div>",{class:"hint",text:"Too many results (2500+), try narrowing your search"})),void $("#results-count").text("");$("#results-count").text(`Results: ${e.length}`);for(let t=0;t<e.length;t++){let s=e[t],a=createFilePreview(s,$("<div>",{class:"result"}));a.on("click",()=>{goToPage(toURLParams({details:getID(s)}))}),a.on("contextmenu",e=>{stash.selection.contains(s)?stash.deselectFile(s):stash.selectFile(s),e.preventDefault(),e.stopPropagation()});let r=getID(s),o=stash.data[s].S;a.attr("title",`<h3>${getContributor(s)} #${r}</h3><br>`+(stash.data[s].Z?`Type: ${stash.typeNames[stash.data[s].Z]}<br>`:`Size: ${o[0]}x${o[1]}<br>`)+`Date: ${formatDate(stash.data[s].T||getApproxTime(r))}<br><br>`+`<i>${getCategory(s)}</i>`),tippy(a[0],{placement:"right",arrow:!0,animation:"perspective",performance:!0}),$("#content").append(a)}$("#sorting-options").removeClass("hidden"),updateResultGroups(),$(".spinner-container").css("display","none").slice(0,10).css("display","flex"),updateFileScale()})(t.sort(naturalSorter)),e.color&&filterResultsByColor()})();</script>