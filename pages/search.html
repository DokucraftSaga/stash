<script>(()=>{stash.page.onRemove=(()=>{$(".remove-on-page-change").remove(),$("#sorting-options").addClass("hidden")}),$("#title").after(E("h2").attr("id","results-count").addClass("remove-on-page-change")),$("#results-count").after(E("div").attr("id","select-all-button").addClass("header-button remove-on-page-change").text("Select All").on("click",t=>{stash.selectFiles($("#content .file:not(.hidden)").toArray().map(t=>$(t).attr("data-file")))})),$("#select-all-button").after(E("div").attr("id","header-hint").addClass("remove-on-page-change").text("Right-click to select individual files"));let t=decodeQuery();setSearchFormVals(t.category,t.contributor,t.id,t.size,t.color),(t=>{if($("#content").empty(),0==t.length)return $("#content").append(E("div").addClass("hint").text("No results")),void $("#results-count").text("");if(t.length>2500)return $("#content").append(E("div").addClass("hint").text("Too many results (2500+), try narrowing your search")),void $("#results-count").text("");$("#results-count").text(`Results: ${t.length}`);for(let e=0;e<t.length;e++){let a=t[e],s=createFilePreview(a,E("div").addClass("result"));stash.selection.contains(a)&&s.addClass("selected"),s.on("click",()=>{goToPage(toURLParams({details:getID(a)}))}),s.on("contextmenu",t=>{stash.selection.contains(a)?stash.deselectFile(a):stash.selectFile(a),t.preventDefault(),t.stopPropagation()});let o=getID(a),r=stash.data[a].S;s.attr("title",`<h3>${getContributor(a)} #${o}</h3><br>`+(stash.data[a].Z?`Type: ${stash.typeNames[stash.data[a].Z]}<br>`:`Size: ${r[0]}x${r[1]}<br>`)+`Date: ${formatDate(stash.data[a].T||getApproxTime(o))}<br><br>`+`<i>${getCategory(a)}</i>`),tippy(s[0],{placement:"right",arrow:!0,animation:"perspective",performance:!0}),$("#content").append(s)}$("#sorting-options").removeClass("hidden"),updateResultGroups(),updateFileScale()})(stash.search(t).sort(naturalSorter)),t.color&&filterResultsByColor()})();</script>